#include <stdio.h>
#include <string.h>
#include <stdlib.h>

int processInput(char *input) {		
		char buffer[512];
		strcpy(buffer,input);

		printf("Hello, what is the magic word?: You said %s\n",buffer);

		if (strcmp(buffer,"please")==0) {
				fprintf(stdout,"Woaaaa, you got it!\n");
		}
		else {
				fprintf(stdout,"Epic Fail! Epic Fail! Epic Fail! Epic Fail!\n");
		}

		return -1;
}


int main(int argc, char **argv) {
		if (argc<2)	{
				fprintf(stdout,"Synopsis: vuln1 <magic word>\n\n");
				exit(1);
		}

		signed int ret = processInput(argv[1]);
		
		if (ret != -1) {
			system("/bin/sh");
		}

		return 0;
}
  
